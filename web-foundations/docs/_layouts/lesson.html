---
layout: default
---

{% comment %} Detect if TOC exists by checking if markdown has {:toc} {% endcomment %} {% assign has_toc = false %} {%
if page.content contains '{:toc}' %} {% assign has_toc = true %} {% endif %}

<article class="lesson mx-auto py-4 px-4">
	<header class="mb-8 pb-6 border-b border-slate-200 dark:border-neutral-800">
		{% if page.lang == 'es' %}
		<p class="text-slate-500 dark:text-neutral-500 text-sm mb-2">
			WEB ATELIER (UDIT) · Aprender haciendo, con teoría, práctica y reflexión compartida
		</p>
		{% else %}
		<p class="text-slate-500 dark:text-neutral-500 text-sm mb-2">
			WEB ATELIER (UDIT) · Learning by doing, with theory, practice and shared reflection
		</p>
		{% endif %}
		<h1 class="text-4xl font-bold mb-4 text-slate-900 dark:text-neutral-100">{{ page.title }}</h1>
		<p class="canonical-url text-sm">
			<span class="sr-only">URL:</span>
			<a
				href="{{ site.url }}{{ site.baseurl }}{{ page.url }}"
				class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline"
				aria-label="Permanent link to this lesson">
				{{ site.url }}{{ site.baseurl }}{{ page.url }}
			</a>
		</p>
		{% if page.author or page.date %}
		<p class="text-slate-600 dark:text-neutral-400 text-sm mt-2">
			{% if page.author %}By {{ page.author }}{% endif %} {% if page.date %} · {{ page.date | date: "%Y-%m-%d" }}{% endif
			%}
		</p>
		{% endif %}
	</header>

	<div class="flex flex-col lg:flex-row lg:gap-8 lg:items-start">
		{% if has_toc %}
		<aside class="lg:w-64 flex-shrink-0 mb-8 lg:mb-0 self-start">
			<nav
				class="sticky top-8 max-h-[calc(100vh-4rem)] overflow-y-auto lg:sticky lg:top-8 lg:max-h-[calc(100vh-4rem)] lg:overflow-y-auto"
				aria-label="Table of Contents">
				<div class="bg-slate-50 dark:bg-neutral-900 border border-slate-200 dark:border-neutral-800 rounded-lg p-4">
					<h2 class="text-xs font-semibold text-slate-900 dark:text-neutral-100 uppercase tracking-wide mb-3">
						{% if page.lang == "es" %} Tabla de contenidos {% else %} Table of Contents {% endif %}
					</h2>
					{% comment %} Placeholder for TOC that will be moved by JavaScript {% endcomment %}
					<div id="toc-sidebar-placeholder" class="text-xs leading-tight"></div>
				</div>
			</nav>
		</aside>
		{% endif %}

		<div class="flex-1 min-w-0 prose prose-lg prose-slate dark:prose-invert max-w-prose">{{ content }}</div>
	</div>

	<script>
		// Move TOC from content to sidebar and hide the original heading
		(function () {
			const toc = document.getElementById('markdown-toc');
			const placeholder = document.getElementById('toc-sidebar-placeholder');

			if (toc && placeholder) {
				placeholder.appendChild(toc);
			}

			// Hide the TOC heading in the main content (handles multiple languages)
			const tocHeading = document.querySelector('h2.no_toc');
			if (tocHeading) {
				const text = tocHeading.textContent.toLowerCase();
				if (text.includes('table of contents') || text.includes('tabla de contenidos') || text.includes('📋')) {
					tocHeading.style.display = 'none';
				}
			}
		})();
	</script>
</article>
